function transmit(t){var e=Titanium.Network.createHTTPClient();e.open("POST","http://hazlettb-fp1.appspot.com/native"),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){alert("200"==this.status?"Transmission successful":"Transmission failed. Try again later. "+this.status+" "+this.response)},e.onerror=function(t){alert("Transmission error: "+t.error)};var i=new Date;Ti.API.info(i.getDate());var n="id="+emp_id.value+"&month="+(i.getMonth()+1)+"&day="+i.getDate()+"&year="+i.getFullYear()+"&hour="+i.getHours()+"&minute="+i.getMinutes()+"&second="+i.getSeconds()+"&in_out="+t;Ti.API.info(n),e.send(n)}Ti.include("./pubnub-chat.js"),Titanium.UI.setBackgroundColor("#000");var win1=Titanium.UI.createWindow({title:"Time Card"}),emp=Titanium.UI.createLabel({text:"Employee Id",left:"20dp",top:"20dp"});win1.add(emp);var emp_id=Titanium.UI.createTextArea({editable:!0,textAlign:"left",width:"150dp",left:"20dp",top:"40dp",borderColor:"grey",borderRadius:"2dp",borderWidth:"3dp"});win1.add(emp_id);var scanButton=Titanium.UI.createButton({width:"150dp",top:"35dp",right:"20dp",title:"Scan ID"});win1.add(scanButton),scanButton.addEventListener("click",function(){openScanner()});var scanditsdk=require("com.mirasense.scanditsdk"),picker,window3=Titanium.UI.createWindow({title:"ID Scan",navBarHidden:!0}),openScanner=function(){picker=scanditsdk.createView({width:"100%",height:"50%"}),picker.init("cI06DoZRNeNs7CwJYtYHHzpLKhdLh2k/2QaKmTKXMAk",0),picker.showSearchBar(!0),picker.showToolBar(!0),picker.setSuccessCallback(function(t){alert("success ("+t.symbology+"): "+t.barcode),emp_id.value=t.barcode,closeScanner()}),picker.setCancelCallback(function(){closeScanner()}),window3.add(picker),window3.addEventListener("open",function(){picker.setOrientation("iphone"==Ti.Platform.osname||"ipad"==Ti.Platform.osname?Ti.UI.orientation:window3.orientation),picker.setSize(Ti.Platform.displayCaps.platformWidth,Ti.Platform.displayCaps.platformHeight),picker.startScanning()}),window3.open()},closeScanner=function(){null!=picker&&(picker.stopScanning(),window3.remove(picker)),window3.close()};Ti.Gesture.addEventListener("orientationchange",function(t){window3.orientationModes=[Titanium.UI.PORTRAIT,Titanium.UI.UPSIDE_PORTRAIT,Titanium.UI.LANDSCAPE_LEFT,Titanium.UI.LANDSCAPE_RIGHT],null!=picker&&(picker.setOrientation(t.orientation),picker.setSize(Ti.Platform.displayCaps.platformWidth,Ti.Platform.displayCaps.platformHeight))});var inButton=Titanium.UI.createButton({title:"IN",width:"120dp",height:"120dp",top:"120dp",borderColor:"green",borderRadius:"2dp",borderWidth:"3dp",font:{fontSize:"35dp"}});win1.add(inButton),inButton.addEventListener("click",function(){var t="IN";transmit(t),emp_id.value=""});var outButton=Titanium.UI.createButton({title:"OUT",width:"120dp",height:"120dp",top:"270dp",borderColor:"red",borderRadius:"2dp",borderWidth:"3dp",font:{fontSize:"35dp"}});win1.add(outButton),outButton.addEventListener("click",function(){var t="OUT";transmit(t),emp_id.value=""});var adminButton=Titanium.UI.createButton({title:"Admin",width:"150dp",right:"20dp",bottom:"20dp"});win1.add(adminButton),adminButton.addEventListener("click",function(){win2.open()});var chatButton=Titanium.UI.createButton({title:"Chat",width:"150dp",left:"20dp",bottom:"20dp"});win1.add(chatButton);var win3=Ti.App.Chat({"chat-room":"my-random-conversation",window:{title:"Chat Room",backgroundColor:"#000"}});chatButton.addEventListener("click",function(){win3.chat_window.open()});var win2=Titanium.UI.createWindow({title:"Add Employee",backgroundColor:"#000"}),backButton=Titanium.UI.createButton({title:"Back",width:"150dp",right:"20dp",bottom:"20dp"}),submitTimeButton2=Titanium.UI.createButton({title:"Submit",width:"150dp",left:"20dp",bottom:"20dp"});win2.add(submitTimeButton2),backButton.addEventListener("click",function(){win2.close()}),win2.add(backButton);var emp2=Titanium.UI.createLabel({text:"Employee Id",top:"20dp"});win2.add(emp2);var emp_id2=Titanium.UI.createTextArea({editable:!0,width:"300dp",top:"40dp",borderColor:"grey",borderRadius:"2dp",borderWidth:"3dp"});win2.add(emp_id2);var emp_name=Titanium.UI.createLabel({text:"Employee Name",top:"80dp"});win2.add(emp_name);var emp_name2=Titanium.UI.createTextArea({editable:!0,width:"300dp",top:"100dp",borderColor:"grey",borderRadius:"2dp",borderWidth:"3dp"});win2.add(emp_name2);var photoButton=Titanium.UI.createButton({title:"Take Photo",top:"140dp"});win2.add(photoButton),photoButton.addEventListener("click",function(){Titanium.Media.showCamera({success:function(t){if(Ti.API.debug("Our type was: "+t.mediaType),t.mediaType==Ti.Media.MEDIA_TYPE_PHOTO){var e=Ti.UI.createImageView({top:"200dp",width:120,height:120,image:t.media});win2.add(e)}else alert("got the wrong type back ="+t.mediaType)},cancel:function(){},error:function(t){var e=Titanium.UI.createAlertDialog({title:"Camera"});e.setMessage(t.code==Titanium.Media.NO_CAMERA?"Please run this test on device":"Unexpected error: "+t.code),e.show()},saveToPhotoGallery:!0})}),win1.open();